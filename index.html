<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1H2026 GLS Programme Infographic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@700;900&family=Patrick+Hand&family=Noto+Sans+SC:wght@400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        brand: {
                            dark: '#0F172A',
                            primary: '#2563EB',
                            secondary: '#06B6D4',
                            accent: '#FACC15',
                            light: '#F8FAFC'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'Noto Sans SC', 'sans-serif'],
                        display: ['Montserrat', 'Noto Sans SC', 'sans-serif'],
                        playful: ['Patrick Hand', 'Noto Sans SC', 'cursive']
                    }
                }
            }
        }
    </script>

    <style>
        /* --- CORE STYLES --- */
        body {
            background-color: #0F172A;
            overflow-x: hidden;
            scroll-behavior: smooth;
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0F172A; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }

        .slide {
            min-height: 100vh;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 40px 20px;
            box-sizing: border-box;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            overflow: hidden; 
            z-index: 1;
        }

        .content-card {
            background: #F8FAFC;
            width: 100%;
            max-width: 1200px;
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
            z-index: 20; 
            min-height: 700px;
            display: flex;
            flex-direction: column;
        }

        /* Custom Scrollbar for Content Areas */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 3px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }

        /* --- ANIMATIONS --- */
        .reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: all 1s cubic-bezier(0.5, 0, 0, 1);
        }
        .reveal.active {
            opacity: 1;
            transform: translateY(0);
        }
        .delay-100 { transition-delay: 0.1s; }
        .delay-200 { transition-delay: 0.2s; }
        .delay-300 { transition-delay: 0.3s; }

        /* --- MASCOT --- */
        .mascot-wrapper {
            position: absolute;
            width: 120px;
            height: 140px;
            pointer-events: none;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            filter: drop-shadow(0 15px 10px rgba(0,0,0,0.3));
            opacity: 0;
            animation: mascotPopIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            animation-delay: 0.5s;
            z-index: 30; 
        }

        @keyframes mascotPopIn {
            0% { opacity: 0; transform: scale(0.5) translateY(20px); }
            100% { opacity: 1; }
        }

        .speech-bubble {
            position: absolute;
            bottom: 160px;
            right: 80px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 15px 20px;
            width: 240px;
            text-align: center;
            color: #334155;
            font-family: 'Patrick Hand', 'Noto Sans SC', cursive;
            font-size: 20px;
            font-weight: 400;
            line-height: 1.3;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            z-index: 100;
            animation: bubblePop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            animation-delay: 1.2s;
            opacity: 0;
            transform: scale(0.8);
        }
        .speech-bubble::after {
            content: ''; position: absolute; bottom: 0; right: 20px; width: 0; height: 0;
            border: 15px solid transparent; border-top-color: rgba(255, 255, 255, 0.95); border-bottom: 0; border-right: 0;
            margin-left: -10px; margin-bottom: -10px;
        }
        @keyframes bubblePop { to { opacity: 1; transform: scale(1); } }

        /* Mascot Parts */
        .limb { background: linear-gradient(90deg, #0D7A70, #18B0A2, #0D7A70); position: absolute; border-radius: 20px; z-index: 1; box-shadow: inset 0 -2px 5px rgba(0,0,0,0.3); }
        .leg-l { width: 12px; height: 26px; bottom: 0; left: 35px; }
        .leg-r { width: 12px; height: 26px; bottom: 0; right: 35px; }
        .arm-l { width: 10px; height: 35px; top: 65px; left: 10px; transform-origin: top center; }
        .arm-r { width: 10px; height: 35px; top: 65px; right: 10px; transform-origin: top center; }
        .bell { width: 34px; height: 20px; background: radial-gradient(circle at 30% 30%, #F5D0A9, #B46B3E, #8B4513); border-radius: 40px 40px 0 0; position: absolute; top: 8px; z-index: 1; box-shadow: 0 4px 4px rgba(0,0,0,0.3); }
        .bell-l { left: 15px; transform: rotate(-25deg); }
        .bell-r { right: 15px; transform: rotate(25deg); }
        .bell-hammer { width: 8px; height: 6px; background: #5A2E0C; position: absolute; top: 18px; left: 56px; border-radius: 2px; }
        .clock-body { width: 96px; height: 96px; background: radial-gradient(circle at 35% 35%, #FFF8E7, #E5C99E, #C19A6B); border-radius: 50%; position: absolute; bottom: 20px; left: 12px; z-index: 2; border: 3px solid #FFF; box-shadow: inset -5px -5px 15px rgba(0,0,0,0.2); }
        .face-ring { position: absolute; top: 4px; left: 4px; right: 4px; bottom: 4px; border-radius: 50%; border: 2px solid #22D3EE; background: #FDF6E3; box-shadow: inset 2px 2px 8px rgba(0,0,0,0.1), 0 0 8px rgba(34, 211, 238, 0.6); }
        .glasses { position: absolute; top: 32px; width: 100%; display: flex; justify-content: center; gap: 4px; }
        .lens { width: 28px; height: 28px; border: 2px solid #5A3E2B; border-radius: 50%; position: relative; background: linear-gradient(135deg, rgba(255,255,255,0.5) 0%, rgba(255,255,255,0.1) 100%); }
        .bridge { width: 8px; height: 2px; background: #5A3E2B; margin-top: 13px; }
        .eye { background: #333; border-radius: 50%; position: absolute; }
        .eye-normal { width: 10px; height: 10px; top: 8px; left: 8px; }
        .eye-wink { width: 12px; height: 4px; border-bottom: 3px solid #333; border-radius: 0; background: transparent; top: 8px; left: 7px; }
        .eye-happy { width: 12px; height: 6px; border-top: 3px solid #333; border-radius: 50% 50% 0 0; background: transparent; top: 10px; left: 7px; }
        .mouth { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); }
        .mouth-smile { width: 20px; height: 10px; border-bottom: 3px solid #333; border-radius: 0 0 20px 20px; }
        .mouth-o { width: 12px; height: 12px; border: 3px solid #333; border-radius: 50%; background: #333; }

        /* --- MAP CONTAINER --- */
        .map-frame {
            width: 100%;
            max-width: 640px; 
            aspect-ratio: 4 / 3;
            border-radius: 16px;
            overflow: hidden;
            border: 8px solid white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            background-color: #e2e8f0;
            position: relative;
            margin: 0 auto;
        }
        .map-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: relative;
            z-index: 10;
        }
        .map-placeholder {
            position: absolute; top:0; left:0; width:100%; height:100%;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            color: #94a3b8; z-index: 1; text-align: center;
        }

        /* Footer */
        .footer-note {
            position: absolute; bottom: 10px; width: 100%; text-align: center;
            font-size: 0.75rem; color: #94a3b8; font-weight: 600; z-index: 100;
        }

        /* Toggle Button */
        .lang-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 50;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            backdrop-filter: blur(5px);
            transition: all 0.3s ease;
        }
        .lang-toggle:hover { background: rgba(255,255,255,0.2); }

        /* PRE Banner Style - Lower Right Corner */
        .pre-badge-container {
            position: relative;
            overflow: hidden;
        }
        /* Corner Triangle */
        .pre-badge {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 0 40px 40px; /* Size of the triangle */
            border-color: transparent transparent #dc2626 transparent; /* Red */
            z-index: 10;
        }
        /* Text inside the triangle */
        .pre-badge-text {
            position: absolute;
            bottom: 3px;
            right: 2px;
            color: white;
            font-size: 9px;
            font-weight: 900;
            z-index: 11;
            font-family: sans-serif;
            transform: rotate(0deg);
        }

        /* PRIVATE (Blue) Triangle for EC Slides */
        .private-badge {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 0;
            height: 0;
            border-style: solid;
            border-width: 0 0 50px 50px; /* Slightly larger for word Private */
            border-color: transparent transparent #2563EB transparent; /* Brand Blue */
            z-index: 10;
        }
        .private-badge-text {
            position: absolute; bottom: 3px; right: 2px; color: white; font-size: 8px; font-weight: 900; z-index: 11; font-family: sans-serif;
        }

    </style>
</head>
<body>

    <!-- 1. COVER PAGE -->
    <div class="slide">
        <div class="content-card !bg-[#0F172A] !text-white overflow-hidden flex flex-col justify-center items-center relative">
            <!-- Lang Toggle -->
            <button class="lang-toggle" onclick="toggleLanguage()">ğŸŒ EN / ä¸­æ–‡</button>

            <div class="absolute inset-0 opacity-20">
                <div class="absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
                <div class="absolute top-0 right-0 w-96 h-96 bg-brand-primary rounded-full blur-[120px]"></div>
                <div class="absolute bottom-0 left-0 w-96 h-96 bg-brand-secondary rounded-full blur-[120px]"></div>
            </div>

            <div class="relative z-10 text-center px-4 reveal mb-24">
                <div class="inline-block px-4 py-1 border border-cyan-400 rounded-full text-cyan-400 text-sm font-bold tracking-widest mb-6 animate-pulse">
                    <span data-key="market_update">MARKET UPDATE</span>
                </div>
                <h1 class="font-display text-4xl sm:text-6xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-r from-white via-cyan-200 to-blue-400 mb-6 drop-shadow-2xl leading-tight">
                    <span data-key="gls_title">1H2026<br>GLS PROGRAMME</span>
                </h1>
                <p class="font-sans text-lg sm:text-xl md:text-2xl text-slate-300 font-light tracking-wide max-w-2xl mx-auto leading-relaxed">
                    <span data-key="gls_subtitle">A Comprehensive Guide to Residential & Mixed Development Sites</span>
                </p>

                <!-- Mobile Browsing Message -->
                <div class="mt-8 p-4 bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 inline-block max-w-md mx-auto">
                    <p class="font-sans text-cyan-300 text-base md:text-lg font-semibold">
                        <i class="fas fa-mobile-alt mr-2"></i>
                        <span data-key="cover_mobile_msg_1">Built for your phone. Happy browsing!</span>
                    </p>
                    <p class="font-sans text-slate-400 text-xs md:text-sm mt-1">
                        <span data-key="cover_mobile_msg_2">(Rotate for optimal viewing for all pages.)</span>
                    </p>
                </div>
            </div>

            <!-- Intro Mascot - In Front of Card -->
            <div class="mascot-wrapper" style="bottom: 40px; right: 40px; transform: scale(0.5); opacity: 0.85; z-index: 30;">
                <div class="speech-bubble">Hi I am a mascot. My name is Now Choong. I like to play hide-n-seek. Spot me. Wink!</div>
                <div class="bell bell-l"></div><div class="bell bell-r"></div><div class="bell-hammer"></div>
                <div class="limb leg-l"></div><div class="limb leg-r"></div>
                <div class="limb arm-l" style="transform: rotate(-140deg);"></div>
                <div class="limb arm-r" style="transform: rotate(20deg);"></div>
                <div class="clock-body"><div class="face-ring"><div class="glasses"><div class="lens"><div class="eye eye-normal"></div></div><div class="bridge"></div><div class="lens"><div class="eye eye-wink"></div></div></div><div class="mouth mouth-smile"></div></div></div>
            </div>
            
            <div class="footer-note text-slate-500">Created by: Kar Loon | Contact: +65 91860119</div>
        </div>
    </div>

    <!-- 2A. EXECUTIVE SUMMARY: KEY HIGHLIGHTS -->
    <div class="slide">
        <div class="content-card p-8 flex flex-col justify-center">
            <h2 class="font-display text-4xl text-brand-dark mb-8 text-center md:text-left reveal">
                <span data-key="highlights_title">Key Highlights</span>
            </h2>
            <div class="flex flex-col md:flex-row gap-8 items-center md:items-start">
                <div class="w-full md:w-2/3 pr-0 md:pr-12 reveal delay-100">
                    <ul class="text-slate-600 text-sm md:text-base leading-relaxed space-y-4 list-disc pl-4 marker:text-brand-secondary">
                        <li data-key="highlight_1">The overall private housing supply in the GLS programme for 1H2026 will be sustained at a high level of around <strong>9,200 units</strong>, similar to that in 2H2025.</li>
                        <li data-key="highlight_2">The supply includes <strong>4,575</strong> private residential units to be tendered out via the Confirmed List. This is 43% higher than the average Confirmed List supply of around 3,190 units per GLS programme from 2021 to 2023. An additional <strong>4,610</strong> units will be made available via the Reserve List.</li>
                        <li data-key="highlight_3">To advance the development of Jurong Lake District (JLD), the Government will sell the Master Developer site as separate parcels, starting with the release of a White site at Town Hall Link on the Reserve List. This approach was decided following a review of property market conditions and extensive industry engagements.</li>
                        <li data-key="highlight_4">The Government will continue to closely monitor economic and property market conditions, calibrating the release of GLS supply to ensure a stable and sustainable housing market.</li>
                    </ul>
                </div>
                <div class="w-full md:w-1/3 flex flex-col gap-4 reveal delay-200">
                    <div class="bg-blue-50 p-6 rounded-xl border border-blue-100 text-center shadow-sm">
                        <div class="text-4xl font-black text-brand-primary">4,575</div>
                        <div class="text-xs font-bold text-slate-500 uppercase mt-1" data-key="confirmed_units">Confirmed Units</div>
                    </div>
                    <div class="bg-yellow-50 p-6 rounded-xl border border-yellow-100 text-center shadow-sm">
                        <div class="text-4xl font-black text-yellow-600">4,610</div>
                        <div class="text-xs font-bold text-slate-500 uppercase mt-1" data-key="reserve_units">Reserve Units</div>
                    </div>
                    <div class="bg-brand-dark p-6 rounded-xl border border-slate-700 text-center text-white shadow-lg mt-2">
                        <div class="text-5xl font-black text-brand-secondary">9,185</div>
                        <div class="text-xs font-bold text-slate-400 uppercase mt-1" data-key="total_units">Total Residential Units</div>
                    </div>
                </div>
            </div>
            <div class="mascot-target" data-slide="summary-text"></div>
            <div class="footer-note">
                <span data-key="footer">Created by: Kar Loon | Contact: +65 91860119</span>
            </div>
        </div>
    </div>

    <!-- 2B. EXECUTIVE SUMMARY: SUPPLY BREAKDOWN -->
    <div class="slide">
        <div class="content-card p-8 flex flex-col h-auto">
            <div class="flex flex-col md:flex-row justify-between items-center mb-6 md:pr-32 relative z-20 reveal">
                <h2 class="font-display text-4xl text-brand-dark text-center md:text-left">
                    <span data-key="supply_breakdown">Supply Breakdown</span>
                </h2>
                <div class="flex gap-4 mt-4 md:mt-0 text-xs md:text-sm font-bold uppercase">
                    <div class="flex items-center"><div class="w-4 h-4 bg-[#2563EB] rounded mr-2"></div> <span data-key="legend_confirmed">Confirmed List</span></div>
                    <div class="flex items-center"><div class="w-4 h-4 bg-[#FACC15] rounded mr-2"></div> <span data-key="legend_reserve">Reserve List</span></div>
                    <div class="flex items-center"><div class="w-4 h-4 bg-[#9333EA] rounded mr-2"></div> <span data-key="legend_white">White Site</span></div>
                </div>
            </div>
            <div class="flex-grow bg-white rounded-xl p-4 shadow-inner flex items-center justify-center relative w-full h-[60vh] reveal delay-100">
                <div class="chart-container w-full h-full">
                    <canvas id="summaryChart"></canvas>
                </div>
            </div>
            
            <!-- New Mobile Browsing Message for Chart Slide -->
            <div class="mt-4 text-center p-3 bg-blue-50 border border-blue-200 rounded-xl text-blue-800 text-sm md:text-base font-bold shadow-sm font-sans">
                <i class="fas fa-mobile-alt mr-2"></i> <span data-key="mobile_msg_1">Built for your phone. Happy browsing!</span> <span class="block sm:inline font-normal text-blue-600" data-key="mobile_msg_2">(Rotate for optimal viewing for all pages.)</span>
            </div>

            <div class="mascot-target" data-slide="summary-chart"></div>
            <div class="footer-note">
                <span data-key="footer">Created by: Kar Loon | Contact: +65 91860119</span>
            </div>
        </div>
    </div>

    <!-- 2D. SITE DIRECTORY -->
    <div class="slide" id="directory-slide">
        <div class="content-card p-8 flex flex-col justify-center h-full">
            <h2 class="font-display text-4xl text-brand-dark mb-6 text-center md:text-left reveal">
                <span data-key="directory_title">Site Directory</span>
            </h2>
            <div id="directory-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 overflow-y-auto custom-scrollbar pr-2" style="max-height: 70vh;">
                <!-- JS will populate this -->
            </div>
            <div class="mascot-target" data-slide="directory"></div>
            <div class="footer-note">
                <span data-key="footer">Created by: Kar Loon | Contact: +65 91860119</span>
            </div>
        </div>
    </div>

    <!-- CONTAINER FOR GENERATED SLIDES -->
    <div id="generated-slides"></div>

    <!-- 3. CLOSING PAGE -->
    <div class="slide">
        <div class="content-card !bg-gradient-to-br !from-brand-primary !to-brand-secondary !text-white flex flex-col justify-center items-center text-center">
            <div class="mascot-target relative z-30 mb-8" data-slide="end"></div>
            <h2 class="font-display text-5xl md:text-7xl font-black mb-6 drop-shadow-lg reveal">
                <span data-key="stay_tuned">STAY TUNED!</span>
            </h2>
            <p class="text-2xl font-light text-blue-100 max-w-xl reveal delay-100">
                <span data-key="closing_sub">For more updates and detailed analysis on the Singapore Property Market.</span>
            </p>
            <div class="mt-12 bg-white/10 backdrop-blur-md px-8 py-4 rounded-2xl border border-white/20 reveal delay-200">
                <p class="font-bold">Kar Loon</p>
                <p class="opacity-80">+65 91860119</p>
            </div>
            <div class="footer-note text-blue-200">
                <span data-key="footer">Created by: Kar Loon | Contact: +65 91860119</span>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // --- TRANSLATION DATA ---
        const translations = {
            en: {
                market_update: "MARKET UPDATE",
                gls_title: "1H2026<br>GLS PROGRAMME",
                gls_subtitle: "A Comprehensive Guide to Residential & Mixed Development Sites",
                footer: "Created by: Kar Loon | Contact: +65 91860119",
                highlights_title: "Key Highlights",
                highlight_1: "The overall private housing supply in the GLS programme for 1H2026 will be sustained at a high level of around <strong>9,200 units</strong>, similar to that in 2H2025.",
                highlight_2: "The supply includes <strong>4,575</strong> private residential units to be tendered out via the Confirmed List. This is 43% higher than the average Confirmed List supply of around 3,190 units per GLS programme from 2021 to 2023. An additional <strong>4,610</strong> units will be made available via the Reserve List.",
                highlight_3: "To advance the development of Jurong Lake District (JLD), the Government will sell the Master Developer site as separate parcels, starting with the release of a White site at Town Hall Link on the Reserve List. This approach was decided following a review of property market conditions and extensive industry engagements.",
                highlight_4: "The Government will continue to closely monitor economic and property market conditions, calibrating the release of GLS supply to ensure a stable and sustainable housing market.",
                confirmed_units: "Confirmed Units",
                reserve_units: "Reserve Units",
                total_units: "Total Residential Units",
                supply_breakdown: "Supply Breakdown",
                legend_confirmed: "Confirmed List",
                legend_reserve: "Reserve List",
                legend_white: "White Site",
                stay_tuned: "STAY TUNED!",
                closing_sub: "For more updates and detailed analysis on the Singapore Property Market.",
                mascot_speech: "Hi I am a mascot. My name is Now Choong. I like to play hide-n-seek. Spot me. Wink!",
                lbl_units: "Est. Units",
                lbl_area: "Site Area",
                lbl_launch: "Est. Launch",
                lbl_launching_soon: "Nearby Land Trans. (PSF PPR) - <span class='text-red-600 bg-red-50 px-1 rounded border border-red-200'>LAUNCHING SOON</span>",
                lbl_immediate: "Nearby New Launches Avail for Immediate Booking",
                btn_price: "Click for Latest Pricing & Promo",
                note_price: "Note: Prices shown are Land Price (psf ppr)",
                key_points: "Key Selling Points",
                cover_mobile_msg_1: "Built for your phone. Happy browsing!",
                cover_mobile_msg_2: "(Rotate for optimal viewing for all pages.)",
                mobile_msg_1: "Built for your phone. Happy browsing!",
                mobile_msg_2: "(Rotate for optimal viewing for all pages.)",
                directory_title: "Site Directory",
                btn_back_directory: "Back to Directory"
            },
            zh: {
                market_update: "å¸‚åœºå¿«è®¯",
                gls_title: "2026å¹´ä¸ŠåŠå¹´<br>æ”¿åºœå”®åœ°è®¡åˆ’",
                gls_subtitle: "ä½å®…åŠç»¼åˆå‘å±•ç”¨åœ°ç»¼åˆæŒ‡å—",
                footer: "åˆ›ä½œè€…ï¼šKar Loon | è”ç³»æ–¹å¼ï¼š+65 91860119",
                highlights_title: "ä¸»è¦äº®ç‚¹",
                highlight_1: "2026å¹´ä¸ŠåŠå¹´æ”¿åºœå”®åœ°è®¡åˆ’ï¼ˆGLSï¼‰ä¸­çš„æ•´ä½“ç§äººä½å®…ä¾›åº”é‡å°†ä¿æŒåœ¨çº¦ <strong>9,200 ä¸ªå•ä½</strong>çš„é«˜æ°´å¹³ï¼Œä¸2025å¹´ä¸‹åŠå¹´ç›¸ä¼¼ã€‚",
                highlight_2: "ä¾›åº”åŒ…æ‹¬é€šè¿‡æ­£é€‰åå•æ‹›æ ‡çš„ <strong>4,575</strong> ä¸ªç§äººä½å®…å•ä½ã€‚è¿™æ¯”2021å¹´è‡³2023å¹´æœŸé—´æ¯æœŸGLSè®¡åˆ’å¹³å‡çº¦3,190ä¸ªå•ä½çš„æ­£é€‰åå•ä¾›åº”é‡é«˜å‡º43%ã€‚å¦æœ‰ <strong>4,610</strong> ä¸ªå•ä½å°†é€šè¿‡å¤‡å”®åå•æä¾›ã€‚",
                highlight_3: "ä¸ºæ¨è¿›è£•å»Šæ¹–åŒºï¼ˆJLDï¼‰çš„å‘å±•ï¼Œæ”¿åºœå°†æŠŠä¸»å¼€å‘å•†åœ°å—åˆ†æ‹†å‡ºå”®ï¼Œé¦–å…ˆåœ¨å¤‡å”®åå•ä¸Šæ¨å‡ºä½äº Town Hall Link çš„ç™½è‰²ç”¨åœ°ã€‚è¿™ä¸€åšæ³•æ˜¯åœ¨å®¡æŸ¥æˆ¿åœ°äº§å¸‚åœºçŠ¶å†µå¹¶è¿›è¡Œå¹¿æ³›çš„è¡Œä¸šæ¥è§¦åå†³å®šçš„ã€‚",
                highlight_4: "æ”¿åºœå°†ç»§ç»­å¯†åˆ‡ç›‘æµ‹ç»æµå’Œæˆ¿åœ°äº§å¸‚åœºçŠ¶å†µï¼Œè°ƒæ•´GLSä¾›åº”çš„å‘å¸ƒï¼Œä»¥ç¡®ä¿æˆ¿åœ°äº§å¸‚åœºçš„ç¨³å®šå’Œå¯æŒç»­å‘å±•ã€‚",
                confirmed_units: "æ­£é€‰åå•å•ä½",
                reserve_units: "å¤‡å”®åå•å•ä½",
                total_units: "ä½å®…å•ä½æ€»æ•°",
                supply_breakdown: "ä¾›åº”ç»†åˆ†",
                legend_confirmed: "æ­£é€‰åå•",
                legend_reserve: "å¤‡å”®åå•",
                legend_white: "ç™½è‰²ç”¨åœ°",
                stay_tuned: "æ•¬è¯·å…³æ³¨ï¼",
                closing_sub: "è·å–æ›´å¤šæ–°åŠ å¡æˆ¿åœ°äº§å¸‚åœºçš„æ›´æ–°å’Œè¯¦ç»†åˆ†æã€‚",
                mascot_speech: "å—¨ï¼Œæˆ‘æ˜¯å‰ç¥¥ç‰©ã€‚æˆ‘å« Nowé’Ÿã€‚æˆ‘å–œæ¬¢ç©æ‰è¿·è—ã€‚å¿«æ¥æ‰¾æˆ‘å§ï¼Œçœ¨çœ¼ï¼",
                lbl_units: "é¢„è®¡å•ä½",
                lbl_area: "å åœ°é¢ç§¯",
                lbl_launch: "é¢„è®¡æ¨å‡º",
                lbl_launching_soon: "é™„è¿‘åœŸåœ°äº¤æ˜“ (æ¯å¹³æ–¹è‹±å°ºå®¹ç§¯ç‡ä»·æ ¼) - <span class='text-red-600 bg-red-50 px-1 rounded border border-red-200'>å³å°†æ¨å‡º</span>",
                lbl_immediate: "é™„è¿‘å¯ç«‹å³é¢„è®¢çš„æ–°æ¥¼ç›˜",
                btn_price: "æŸ¥çœ‹æœ€æ–°ä»·æ ¼è¡¨",
                note_price: "æ³¨ï¼šæ˜¾ç¤ºä»·æ ¼ä¸ºåœŸåœ°ä»·æ ¼ (æ¯å¹³æ–¹è‹±å°ºå®¹ç§¯ç‡)",
                key_points: "ä¸»è¦å–ç‚¹",
                cover_mobile_msg_1: "ä¸“ä¸ºæ‰‹æœºæ‰“é€ ã€‚æµè§ˆæ„‰å¿«ï¼",
                cover_mobile_msg_2: "ï¼ˆæ—‹è½¬å±å¹•ä»¥è·å¾—æœ€ä½³è§‚çœ‹ä½“éªŒã€‚ï¼‰",
                mobile_msg_1: "ä¸“ä¸ºæ‰‹æœºæ‰“é€ ã€‚æµè§ˆæ„‰å¿«ï¼",
                mobile_msg_2: "ï¼ˆæ—‹è½¬å±å¹•ä»¥è·å¾—æœ€ä½³è§‚çœ‹ä½“éªŒã€‚ï¼‰",
                directory_title: "åœ°å—ç›®å½•",
                btn_back_directory: "è¿”å›ç›®å½•"
            }
        };

        let currentLang = 'en';

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'zh' : 'en';
            const t = translations[currentLang];
            
            // Update Static Elements
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if(t[key]) el.innerHTML = t[key];
            });

            // Update Mascot Speech on Cover
            const bubble = document.querySelector('.mascot-wrapper .speech-bubble');
            if(bubble) bubble.innerText = t.mascot_speech;

            // Update Labels in Generated Slides
            document.querySelectorAll('.slide-label-units').forEach(el => el.innerText = t.lbl_units);
            document.querySelectorAll('.slide-label-area').forEach(el => el.innerText = t.lbl_area);
            document.querySelectorAll('.slide-label-launch').forEach(el => el.innerText = t.lbl_launch);
            document.querySelectorAll('.slide-label-launching').forEach(el => el.innerHTML = t.lbl_launching_soon); // Using innerHTML to support styling
            document.querySelectorAll('.slide-label-immediate').forEach(el => el.innerText = t.lbl_immediate);
            document.querySelectorAll('.slide-label-note').forEach(el => el.innerText = t.note_price);
            document.querySelectorAll('.slide-btn-price').forEach(el => el.innerText = t.btn_price);
            document.querySelectorAll('.slide-label-keypoints').forEach(el => el.innerText = t.key_points);
            document.querySelectorAll('.slide-btn-back').forEach(el => el.innerText = t.btn_back_directory);
        }

        document.addEventListener('DOMContentLoaded', function() {
            // 1. GENERATE SITE SLIDES DYNAMICALLY
            const sites = [
                { name: "Holland Plain", type: "Residential", list: "Confirmed", units: 280, area: "1.57 ha", date: "Feb 2026", img: "holland plain.jpg", color: "blue", 
                  keyPoints: [
                      "Part of green Bukit Timah neighbourhood",
                      "Near Methodist Girlsâ€™ School, Holland Green Linear Park, Rail Corridor",
                      "Well-connected via King Albert Park MRT (Downtown and Cross Island Lines)",
                      "Tranquil private estates nearby",
                      "Unit cap at 282 for controlled density"
                  ],
                  launching: [
                    { name: "Holland Link (Jul 2025)", price: "$1,432" },
                    { name: "Bukit Timah Rd (Nov 2025)", price: "$1,820" },
                    { name: "Dunearn Rd (Jun 2025)", price: "$1,410" }
                  ],
                  immediate: [
                    { name: "Skye at Holland (May 2024)", price: "$1,285" },
                    { name: "Nava Grove (Nov 2023)", price: "$1,223" },
                    { name: "8@BT (Nov 2022)", price: "$1,343", pre: true },
                    { name: "Pinetree Hill (Jun 2022)", price: "$1,318", pre: true }
                  ]
                },
                { name: "River Valley Green (Parcel C)", type: "Residential", list: "Confirmed", units: 470, area: "1.15 ha", date: "Apr 2026", img: "river valley green parcal c.jpg", color: "blue", 
                  keyPoints: [
                      "Prime District 9 city fringe",
                      "Near Great World MRT, Orchard Road, Singapore River parks",
                      "Lower plot ratio (3.5) reduces risk",
                      "Appeals to urban buyers with shopping/dining access",
                      "Carried over from prior list"
                  ],
                  launching: [
                    { name: "River Modern (Feb 2025)", price: "$1,420" }
                  ],
                  immediate: [
                    { name: "Zyon Grand (Apr 2024)", price: "$1,202" },
                    { name: "River Green (Jun 2024)", price: "$1,325" },
                    { name: "Promenade Peak (Aug 2024)", price: "$1,304" }
                  ]
                },
                { name: "Peck Hay Road", type: "Residential", list: "Confirmed", units: 315, area: "0.55 ha", date: "Apr 2026", img: "Peck Hay Road.jpg", color: "blue", 
                  keyPoints: [
                      "Newton urban village transformation (URA Master Plan 2025)",
                      "Near Newton MRT, Orchard, Novena healthcare",
                      "Within 1km of ACS Junior/SJIJ",
                      "Premium CCR location with strong bidder interest expected"
                  ],
                  launching: [
                    { name: "Bukit Timah Rd (Nov 2025)", price: "$1,820" }
                  ],
                  immediate: [
                     { name: "Upper House (Jan 2024)", price: "$1,617" },
                     { name: "The Orie (Nov 2023)", price: "$1,360" }
                  ]
                },
                { name: "Berlayar Drive", type: "Residential", list: "Confirmed", units: 415, area: "2.54 ha", date: "May 2026", img: "berlayar drive.jpg", color: "blue", 
                  keyPoints: [
                      "Greater Southern Waterfront location",
                      "Sea views over Keppel Bay",
                      "Near Telok Blangah MRT, HarbourFront",
                      "Part of former Keppel Club redevelopment (10,000 homes total)",
                      "Central location with waterfront appeal"
                  ],
                  launching: [
                    { name: "Telok Blangah Rd (Nov 2025)", price: "$1,326" },
                    { name: "Keppel Bay Plot 6 (2025)", price: "N/A" }
                  ],
                  immediate: [
                    { name: "Newport Residences (FH)", price: "Redevelopment", pre: true },
                    { name: "Terra Hill (FH) (Oct 2021)", price: "$1,355", pre: true }
                  ]
                },
                { name: "Canberra Drive (EC)", type: "EC", list: "Confirmed", units: 185, area: "1.16 ha", date: "May 2026", img: "canberra drive EC.jpg", color: "blue", 
                  question: "if a new private new launch and new ec have similar land price, which is better?",
                  keyPoints: [
                      "Quieter northern pocket with greenery/waterfront",
                      "Near Northoaks/Endeavour Primary schools",
                      "Appeals to upgraders",
                      "Opportunity for smaller developers",
                      "Bus to Sembawang MRT"
                  ],
                  launching: [
                    { name: "Sembawang Rd EC (Sep 2025)", price: "$692" },
                    { name: "Woodlands Dr 17 EC (Aug 2025)", price: "$782" },
                    { name: "Chencharu Close GLS (Sep 2025)", price: "$980", nonEC: true }
                  ],
                  immediate: [
                    { name: "Canberra Crescent Resi (Jul 2024)", price: "$793", nonEC: true },
                    { name: "Norwood Grand (Sep 2023)", price: "$904", nonEC: true }
                  ]
                },
                { name: "New Upper Changi Road", type: "Residential", list: "Confirmed", units: 1040, area: "3.16 ha", date: "May 2026", img: "New Upper Changi Road.jpg", color: "blue", 
                  keyPoints: [
                      "Mature Bedok heartland",
                      "Walking distance to Bedok MRT, mall, hawker centre, library",
                      "Near schools like Opera Estate Primary",
                      "Strong upgrader demand from HDB estates",
                      "Large site likely for consortiums"
                  ],
                  launching: [
                    { name: "Bedok Rise (Nov 2025)", price: "$1,330" },
                    { name: "Bayshore Road (Mar 2025)", price: "$1,388" },
                    { name: "Pinery Residence (Oct 2024)", price: "$1,004" }
                  ],
                  immediate: [
                    { name: "The Continuum (FH) (Nov 2021)", price: "$1,488", pre: true },
                    { name: "Bagnall Haus (FH) (Jan 2023)", price: "$1,106", pre: true },
                    { name: "Grand Dunman (Jun 2022)", price: "$1,350", pre: true },
                    { name: "Parktown Residences (Jun 2023)", price: "$885" }
                  ]
                },
                { name: "Lorong Puntong", type: "Residential", list: "Confirmed", units: 140, area: "0.43 ha", date: "Jun 2026", img: "Lorong Puntong (Sin ming).jpg", color: "blue", 
                  keyPoints: [
                      "Near Bright Hill MRT (Cross Island Line)",
                      "Opposite Ai Tong School",
                      "Private estate bordering Bishan/Ang Mo Kio",
                      "Appeals to families",
                      "Small size suits smaller developers",
                      "Upgrader potential from Sin Ming"
                  ],
                  launching: [
                    { name: "Former Thomson View (Nov 2024)", price: "$1,178" },
                    { name: "Lentor Gardens GLS (Apr 2025)", price: "$920" },
                    { name: "Chuan Grove (2H 2024 & 2025)", price: "$1,354" }
                  ],
                  immediate: [
                    { name: "The Orie (Nov 2023)", price: "$1,360" },
                    { name: "Chuan Park (Jul 2022)", price: "$1,254", pre: true },
                    { name: "Artisan 8 (Aug 2025)", price: "$1,059" },
                    { name: "Springleaf Residence (Apr 2024)", price: "$905" },
                    { name: "Lentoria (Sep 2022)", price: "$1,130", pre: true },
                    { name: "Hillock Green (Sep 2022)", price: "$1,108", pre: true }
                  ]
                },
                { name: "Sembawang Drive (EC)", type: "EC", list: "Confirmed", units: 450, area: "1.29 ha", date: "Jun 2026", img: "sembawang drive EC.jpg", color: "blue", 
                  keyPoints: [
                      "Quieter northern pocket with greenery/waterfront",
                      "Near Northoaks/Endeavour Primary schools",
                      "Appeals to upgraders",
                      "Opportunity for smaller developers",
                      "Bus to Sembawang MRT"
                  ],
                  launching: [
                    { name: "Sembawang Rd EC (Sep 2025)", price: "$692" },
                    { name: "Woodlands Dr 17 EC (Aug 2025)", price: "$782" }
                  ],
                  immediate: [
                    { name: "Norwood Grand (Sep 2023)", price: "$904", nonEC: true },
                    { name: "Canberra Crescent Resi (Jul 2024)", price: "$793", nonEC: true }
                  ]
                },
                { name: "Bayshore Drive", type: "Mixed Use", list: "Confirmed", units: 1280, area: "5.74 ha", date: "Mar 2026", img: "bayshore drive.jpg", color: "blue", 
                  keyPoints: [
                      "Integrated with Bedok South MRT",
                      "Near East Coast Park, Temasek Primary",
                      "Mixed-use with bus interchange",
                      "Largest site in programme",
                      "Potential sea/landed views",
                      "High capital likely needs partnerships"
                  ],
                  launching: [
                    { name: "Bayshore Road (Mar 2025)", price: "$1,388" },
                    { name: "Bedok Rise (Nov 2025)", price: "$1,330" }
                  ],
                  immediate: [
                    { name: "Bagnall Haus (FH) (Jan 2023)", price: "$1,106", pre: true },
                    { name: "The Continuum (FH) (Nov 2021)", price: "$1,488", pre: true },
                    { name: "Arina East Residences (FH) (Dec 2021)", price: "$1,540", pre: true },
                    { name: "Grand Dunman (Jun 2022)", price: "$1,350", pre: true }
                  ]
                },
                { name: "Marina Gardens Lane", type: "Residential", list: "Reserve", units: 390, area: "0.60 ha", date: "Available", img: "Marina Gardens Lane.jpg", color: "yellow", 
                  keyPoints: [
                      "Marina South area",
                      "Retail cap at 150 sq m",
                      "Carried over",
                      "Supports mixed urban development"
                  ],
                  launching: [
                    { name: "Newport Residence (FH)", price: "Redevelopment" }
                  ],
                  immediate: [
                    { name: "W Residences (Sep 2021)", price: "$1,379", pre: true }
                  ]
                },
                { name: "Media Circle", type: "Residential", list: "Reserve", units: 520, area: "0.57 ha", date: "Available", img: "Media Circle.jpg", color: "yellow", 
                  keyPoints: [
                      "Predominantly long-stay serviced apartments",
                      "Retail cap 400 sq m",
                      "Media/tech hub proximity"
                  ],
                  launching: [
                    { name: "Media Circle Parcel A (Mar 2025)", price: "$1,037" }
                  ],
                  immediate: [
                    { name: "Bloomsbury Residences (Jan 2024)", price: "$1,191" },
                    { name: "LyndenWoods", price: "Redevelopment" },
                    { name: "Blossoms By The Park (Sep 2021)", price: "$1,246", pre: true },
                    { name: "The Hill @ One-North (Sep 2021)", price: "$1,210", pre: true }
                  ]
                },
                { name: "Media Circle (Parcel B)", type: "Residential", list: "Reserve", units: 500, area: "1.00 ha", date: "Available", img: "Media Circle (Parcel B).jpg", color: "yellow", 
                  keyPoints: [
                      "Retail cap 400 sq m",
                      "Complements media district growth"
                  ],
                  launching: [
                    { name: "Media Circle Parcel A (Mar 2025)", price: "$1,037" }
                  ],
                  immediate: [
                    { name: "Bloomsbury Residences (Jan 2024)", price: "$1,191" },
                    { name: "LyndenWoods", price: "Redevelopment" },
                    { name: "Blossoms By The Park (Sep 2021)", price: "$1,246", pre: true },
                    { name: "The Hill @ One-North (Sep 2021)", price: "$1,210", pre: true }
                  ]
                },
                { name: "Cross Street", type: "Residential", list: "Reserve", units: 315, area: "0.23 ha", date: "Available", img: "Cross Street.jpg", color: "yellow", 
                  keyPoints: [
                      "Long-stay serviced apartments",
                      "Min commercial 500 sq m",
                      "CBD fringe accessibility"
                  ],
                  launching: [
                    { name: "Newport Residences (FH)", price: "Redevelopment" }
                  ],
                  immediate: [
                    { name: "W Residences (Sep 2021)", price: "$1,379", pre: true },
                    { name: "TMW Maxwell (May 2021)", price: "$1,565", pre: true },
                    { name: "Union Square Resi", price: "Redevelopment" }
                  ]
                },
                { name: "Morrison Lane", type: "Residential", list: "Reserve", units: 200, area: "0.66 ha", date: "Feb 2026", img: "Morrison Lane.jpg", color: "yellow", 
                  keyPoints: [
                      "New site",
                      "Min retail 750 sq m + 500 sq m childcare",
                      "Urban residential appeal"
                  ],
                  launching: [
                    { name: "River Modern (Feb 2025)", price: "$1,420" }
                  ],
                  immediate: [
                    { name: "Zyon Grand (Apr 2024)", price: "$1,202" },
                    { name: "Robertson Opus (999LH) (Jun 2024)", price: "$1,410", pre: true },
                    { name: "Union Square Resi", price: "Redevelopment" },
                    { name: "River Green (Jun 2024)", price: "$1,325" },
                    { name: "Promenade Peak (Aug 2024)", price: "$1,304" }
                  ]
                },
                { name: "Kitchener Link", type: "Residential", list: "Reserve", units: 135, area: "0.39 ha", date: "Jun 2026", img: "Kitchener Link.jpg", color: "yellow", 
                  keyPoints: [
                      "New site",
                      "Reduced serviced apartments quota",
                      "Central location near amenities"
                  ],
                  launching: [
                    { name: "Dorset Road (Oct 2025)", price: "$1,338" }
                  ],
                  immediate: [
                    { name: "The Arcady (Jul 2022)", price: "$1,313", pre: true }
                  ]
                },
                { name: "Telok Ayer Street", type: "Hotel / Residential", list: "Reserve", units: 135, area: "0.42 ha", date: "Dec 2025", img: "Telok Ayer Street.jpg", color: "yellow", 
                  keyPoints: [
                      "Min long-stay serviced apartments 6,200 sq m",
                      "Carried over",
                      "CBD heritage vibe"
                  ],
                  launching: [],
                  immediate: [
                    { name: "W Residences (Sep 2021)", price: "$1,379", pre: true },
                    { name: "One Bernam (Sep 2019)", price: "$1,463", pre: true }
                  ]
                },
                { name: "Marina Gardens Crescent", type: "White Site", list: "Reserve", units: 775, area: "1.73 ha", date: "Available", img: "Marina Gardens White Site.jpg", color: "purple", 
                  keyPoints: [
                      "Retail cap 6,000 sq m + min 500 sq m childcare",
                      "Mixed-use in growing Marina area"
                  ],
                  launching: [
                    { name: "Marina Gdns Ln 1 (Jun 2023)", price: "$1,402" }
                  ],
                  immediate: [
                    { name: "W Residences (Sep 2021)", price: "$1,379", pre: true }
                  ]
                },
                { name: "Woodlands Avenue 2", type: "White Site", list: "Reserve", units: 440, area: "2.75 ha", date: "Available", img: "woodlands avenue 2.jpg", color: "purple", 
                  keyPoints: [
                      "Min office 45,000 sq m, retail cap 33,000 sq m",
                      "Supports northern decentralization"
                  ],
                  launching: [
                    { name: "Woodlands Dr 17 EC (Aug 2025)", price: "$782" }
                  ],
                  immediate: [
                    { name: "Norwood Grand (Sep 2023)", price: "$904" }
                  ]
                },
                { name: "Town Hall Link", type: "White Site", list: "Reserve", units: 1200, area: "3.72 ha", date: "Mar 2026", img: "town hall link.jpg", color: "purple", 
                  keyPoints: [
                      "New JLD carve-out",
                      "Min office 40,000 sq m + 800 sq m childcare",
                      "District cooling/waste systems",
                      "JRL/CRL connectivity by 2028/2032",
                      "Reduced risk with govt infrastructure support"
                  ],
                  launching: [
                    { name: "Lakeside Drive (Jun 2025)", price: "$1,132" }
                  ],
                  immediate: [
                    { name: "J'den (Nov 2023)", price: "Redevelopment" },
                    { name: "The LakeGarden Res (May 2022)", price: "$1,077", pre: true },
                    { name: "Sora (Jul 2022)", price: "$1,023", pre: true }
                  ]
                }
            ];

            const slidesContainer = document.getElementById('generated-slides');
            const directoryGrid = document.getElementById('directory-grid');
            const waBase = "https://wa.me/6591860119?text=Hi%20Kar%20Loon!!%20%F0%9F%91%8B%F0%9F%98%84%0ASaw%20your%20%E2%80%9CClick%20for%20Latest%20Pricing%20%26%20Promo%20Alerts%E2%80%9D%20%E2%86%92%20I%20clicked%20faster%20than%20my%20mom%20forwards%20fake%20news%20%F0%9F%A4%A3%0AHit%20me%20with%20the%20latest%20price%20%2B%20any%20crazy%20deals%20lah!%0AProject%20I%20want%3A%20";
            
            sites.forEach((site, index) => {
                const badgeColor = site.list === "Confirmed" ? "bg-blue-100 text-brand-primary border-blue-200" : (site.type === "White Site" ? "bg-purple-100 text-purple-600 border-purple-200" : "bg-yellow-100 text-yellow-700 border-yellow-200");
                
                // 1. Populate Directory
                const dirBtn = document.createElement('a');
                dirBtn.href = `#site-${index}`;
                dirBtn.className = `flex flex-col items-start p-3 rounded-lg shadow-sm hover:shadow-md transition-all border border-slate-200 bg-white hover:border-brand-primary group`;
                
                // Determine color indicator
                let indicatorColor = "bg-slate-300";
                if(site.list === "Confirmed") indicatorColor = "bg-blue-500";
                else if(site.type === "White Site") indicatorColor = "bg-purple-500";
                else indicatorColor = "bg-yellow-500";

                dirBtn.innerHTML = `
                    <div class="flex items-center w-full mb-2">
                        <div class="w-2 h-2 rounded-full ${indicatorColor} mr-2"></div>
                        <span class="text-[10px] font-bold text-slate-400 uppercase tracking-wider">${site.list}</span>
                    </div>
                    <div class="font-bold text-sm text-slate-700 group-hover:text-brand-primary transition-colors leading-tight">${site.name}</div>
                `;
                directoryGrid.appendChild(dirBtn);


                // 2. Key Selling Points HTML
                let keyPointsHTML = '';
                if (site.keyPoints && site.keyPoints.length > 0) {
                    keyPointsHTML = `
                    <div class="mt-4 pt-4 border-t border-slate-200 reveal delay-100">
                        <h4 class="text-[10px] font-bold text-slate-400 uppercase mb-2 slide-label-keypoints">Key Selling Points</h4>
                        <ul class="text-xs text-slate-600 list-disc pl-4 space-y-1">
                            ${site.keyPoints.map(point => `<li>${point}</li>`).join('')}
                        </ul>
                    </div>`;
                }

                const launchingHTML = site.launching && site.launching.length > 0 
                    ? site.launching.map(c => `
                        <div class="bg-slate-50 p-2 rounded border border-slate-200 pre-badge-container">
                            <div class="text-[10px] sm:text-xs text-slate-500 leading-tight mb-1 break-words hyphens-auto" title="${c.name}">${c.name}</div>
                            <div class="text-sm font-bold text-slate-700">${c.price}</div>
                            ${c.pre ? '<div class="pre-badge"></div><div class="pre-badge-text">PRE</div>' : ''}
                        </div>
                      `).join('') 
                    : '<div class="text-[10px] text-slate-400 italic">None</div>';

                const immediateHTML = site.immediate && site.immediate.length > 0
                    ? site.immediate.map(c => `
                        <div class="bg-green-50 p-2 rounded border border-green-200 pre-badge-container badge-container">
                            <div class="text-[10px] sm:text-xs text-slate-500 leading-tight mb-1 break-words hyphens-auto" title="${c.name}">${c.name}</div>
                            <div class="text-sm font-bold text-green-700">${c.price}</div>
                            ${c.pre ? '<div class="pre-badge"></div><div class="pre-badge-text">PRE</div>' : ''}
                            ${c.nonEC ? '<div class="private-badge"></div><div class="private-badge-text">Private</div>' : ''}
                        </div>
                      `).join('')
                    : '<div class="text-[10px] text-slate-400 italic">None</div>';

                const waLink = `${waBase}${encodeURIComponent(site.name)}`;

                const slideHTML = `
                <div class="slide" id="site-${index}">
                    <div class="content-card p-6 md:p-10 flex flex-col md:flex-row gap-8 relative">
                        <!-- Back Button -->
                        <div class="absolute top-4 left-4 z-30">
                            <a href="#directory-slide" class="inline-flex items-center text-xs font-bold text-slate-400 hover:text-brand-primary transition-colors bg-white/80 backdrop-blur-sm px-3 py-1.5 rounded-full border border-slate-200 shadow-sm">
                                <i class="fas fa-arrow-left mr-2"></i> <span class="slide-btn-back">Back to Directory</span>
                            </a>
                        </div>

                        <div class="w-full md:w-1/3 flex flex-col justify-center relative z-20 reveal pt-8 md:pt-0">
                            <div class="inline-block self-start px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wider border mb-4 ${badgeColor}">
                                ${site.list} List â€¢ ${site.type}
                            </div>
                            <h2 class="font-display text-3xl md:text-4xl text-brand-dark mb-6 leading-tight">
                                ${site.name}
                            </h2>
                            <div class="space-y-3">
                                <div class="flex items-center p-3 bg-white rounded-lg shadow-sm border-l-4 border-brand-primary">
                                    <div class="w-8 text-center mr-3"><i class="fas fa-home text-lg text-brand-primary"></i></div>
                                    <div>
                                        <div class="text-[10px] text-slate-400 font-bold uppercase slide-label-units">Est. Units</div>
                                        <div class="text-lg font-bold text-slate-800">${site.units.toLocaleString()}</div>
                                    </div>
                                </div>
                                <div class="flex items-center p-3 bg-white rounded-lg shadow-sm border-l-4 border-brand-secondary">
                                    <div class="w-8 text-center mr-3"><i class="fas fa-ruler-combined text-lg text-brand-secondary"></i></div>
                                    <div>
                                        <div class="text-[10px] text-slate-400 font-bold uppercase slide-label-area">Site Area</div>
                                        <div class="text-lg font-bold text-slate-800">${site.area}</div>
                                    </div>
                                </div>
                                <div class="flex items-center p-3 bg-white rounded-lg shadow-sm border-l-4 border-brand-accent">
                                    <div class="w-8 text-center mr-3"><i class="fas fa-calendar-alt text-lg text-yellow-500"></i></div>
                                    <div>
                                        <div class="text-[10px] text-slate-400 font-bold uppercase slide-label-launch">Est. Launch</div>
                                        <div class="text-lg font-bold text-slate-800">${site.date}</div>
                                    </div>
                                </div>
                            </div>
                            
                            ${keyPointsHTML}

                            <div class="mt-4 pt-4 border-t border-slate-200 reveal delay-100">
                                <h4 class="text-[10px] font-bold text-slate-400 uppercase mb-2 slide-label-launching">Nearby Land Trans. (PSF PPR) - <span class="text-red-600 bg-red-50 px-1 rounded border border-red-200">LAUNCHING SOON</span></h4>
                                <div class="grid grid-cols-2 gap-3">
                                    ${launchingHTML}
                                </div>
                            </div>

                            <div class="mt-4 pt-4 border-t border-slate-200 reveal delay-200">
                                <h4 class="text-[10px] font-bold text-green-600 uppercase mb-2 slide-label-immediate">Nearby New Launches Avail for Immediate Booking</h4>
                                <div class="grid grid-cols-2 gap-3">
                                    ${immediateHTML}
                                </div>
                                <div class="mt-2 text-[10px] text-slate-400 italic slide-label-note">Note: Prices shown are Land Price (psf ppr)</div>
                                <a href="${waLink}" target="_blank" class="mt-3 block w-full bg-green-600 hover:bg-green-700 text-white text-center py-2 rounded text-xs font-bold uppercase tracking-wide transition slide-btn-price">Click for Latest Pricing & Promo</a>
                            </div>

                        </div>
                        <div class="w-full md:w-2/3 relative z-10 flex flex-col justify-center reveal delay-200">
                            <div class="map-frame">
                                <div class="map-placeholder">
                                    <i class="fas fa-map-marked-alt text-4xl mb-2"></i>
                                </div>
                                <img src="${site.img}" onerror="this.style.display='none'" alt="${site.name} Map">
                            </div>
                            ${site.question ? `<div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded shadow-sm text-sm text-slate-700 font-medium">
                                <i class="fas fa-question-circle text-yellow-500 mr-2"></i> ${site.question}
                            </div>` : ''}
                        </div>
                        <div class="footer-note">
                            <span data-key="footer">Created by: Kar Loon | Contact: +65 91860119</span>
                        </div>
                    </div>
                </div>
                `;
                slidesContainer.innerHTML += slideHTML;
            });

            // 2. CHART.JS CONFIGURATION
            const valueLabelPlugin = {
                id: 'valueLabelPlugin',
                afterDatasetsDraw(chart, args, options) {
                    const { ctx } = chart;
                    ctx.save();
                    chart.data.datasets.forEach((dataset, i) => {
                        const meta = chart.getDatasetMeta(i);
                        meta.data.forEach((bar, index) => {
                            const value = dataset.data[index];
                            if (value !== null && value !== undefined) {
                                ctx.fillStyle = '#64748b'; 
                                ctx.font = 'bold 10px Inter';
                                ctx.textAlign = 'center';
                                ctx.textBaseline = 'bottom';
                                ctx.fillText(value.toLocaleString(), bar.x, bar.y - 4);
                            }
                        });
                    });
                    ctx.restore();
                }
            };

            const ctx = document.getElementById('summaryChart').getContext('2d');
            new Chart(ctx, {
                type: 'bar',
                plugins: [valueLabelPlugin],
                data: {
                    labels: [
                        'Holland Plain', 'River Valley', 'Peck Hay', 'Berlayar', 'Canberra (EC)', 
                        'Upp Changi', 'Lor Puntong', 'Sembawang (EC)', 'Bayshore',
                        'Marina Gdns Ln', 'Media Cir', 'Media Cir B', 'Cross St', 
                        'Morrison Ln', 'Kitchener', 'Telok Ayer', 'Marina Gdns Cres', 'Woodlands', 'Town Hall'
                    ],
                    datasets: [{
                        label: 'Est. Units',
                        data: [
                            280, 470, 315, 415, 185, 1040, 140, 450, 1280,
                            390, 520, 500, 315, 200, 135, 135,
                            775, 440, 1200
                        ],
                        backgroundColor: [
                            '#2563EB', '#2563EB', '#2563EB', '#2563EB', '#2563EB', '#2563EB', '#2563EB', '#2563EB', '#2563EB',
                            '#FACC15', '#FACC15', '#FACC15', '#FACC15', '#FACC15', '#FACC15', '#FACC15',
                            '#9333EA', '#9333EA', '#9333EA', '#FACC15'
                        ],
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { 
                        y: { beginAtZero: true },
                        x: { ticks: { font: { size: 10 }, maxRotation: 45, minRotation: 45 } } 
                    },
                    layout: { padding: { top: 25 } }
                }
            });

            // 3. MASCOT RANDOMIZER LOGIC
            const mascotHTML = `
                <div class="bell bell-l"></div><div class="bell bell-r"></div><div class="bell-hammer"></div>
                <div class="limb leg-l"></div><div class="limb leg-r"></div>
                <div class="limb arm-l"></div><div class="limb arm-r"></div>
                <div class="clock-body"><div class="face-ring"><div class="glasses"><div class="lens"><div class="eye eye-l"></div></div><div class="bridge"></div><div class="lens"><div class="eye eye-r"></div></div></div><div class="mouth"></div></div></div>
            `;

            const allSlides = document.querySelectorAll('.slide');
            allSlides.forEach((slide, index) => {
                const existing = slide.querySelectorAll('.mascot-wrapper');
                existing.forEach(el => el.remove());

                const wrapper = document.createElement('div');
                wrapper.className = 'mascot-wrapper';
                wrapper.innerHTML = mascotHTML;
                
                let isCover = index === 0;
                let isSummary1 = index === 1;
                let isSummary2 = index === 2;
                let isDirectory = index === 3; // Directory Slide
                let isEnd = index === allSlides.length - 1;

                // Default
                wrapper.style.zIndex = '30'; // Changed default to 30
                wrapper.style.transform = 'scale(0.5)';

                if (isCover) {
                    wrapper.innerHTML = `
                        <div class="speech-bubble">Hi I am a mascot. My name is Now Choong. I like to play hide-n-seek. Spot me. Wink!</div>
                        ${mascotHTML}
                    `;
                    wrapper.style.bottom = '40px';
                    wrapper.style.right = '40px';
                    wrapper.style.opacity = '0.85';
                    slide.appendChild(wrapper);
                } else if (isSummary1 || isSummary2 || isDirectory || isEnd) {
                    wrapper.style.transform = 'scale(0.5) rotate(0deg)';
                    if(isSummary1) {
                        wrapper.style.bottom = '20px';
                        wrapper.style.right = '40px';
                        wrapper.style.zIndex = '5';
                    } else if (isSummary2) {
                        wrapper.style.top = '10px';
                        wrapper.style.right = '10px';
                        wrapper.style.zIndex = '5';
                    } else if (isDirectory) {
                        wrapper.style.bottom = '20px';
                        wrapper.style.right = '20px';
                        wrapper.style.zIndex = '30';
                        slide.appendChild(wrapper);
                        return;
                    } else {
                        // End slide
                        wrapper.style.position = 'relative';
                        wrapper.style.transform = 'scale(0.75)';
                        const card = slide.querySelector('.content-card');
                        if(card) { card.insertBefore(wrapper, card.firstChild); return; }
                    }
                    slide.appendChild(wrapper);
                } else {
                    // SITE SLIDES: PEEK FROM EDGES (Strictly 30-100% visible)
                    const edges = ['top', 'bottom', 'left', 'right'];
                    const edge = edges[Math.floor(Math.random() * edges.length)];
                    
                    const isFront = Math.random() > 0.5;
                    wrapper.style.zIndex = isFront ? '30' : '30'; // Force front for mobile visibility
                    wrapper.style.position = 'absolute';

                    const rot = Math.floor(Math.random() * 40) - 20;
                    wrapper.style.transform = `rotate(${rot}deg) scale(0.5)`;

                    const pos = Math.random() * 80 + 10; 
                    const peek = Math.floor(Math.random() * 40) - 30; 

                    if (edge === 'top') {
                        wrapper.style.top = peek + 'px';
                        wrapper.style.left = pos + '%';
                    } else if (edge === 'bottom') {
                        wrapper.style.bottom = peek + 'px';
                        wrapper.style.left = pos + '%';
                    } else if (edge === 'left') {
                        wrapper.style.left = peek + 'px';
                        wrapper.style.top = pos + '%';
                    } else if (edge === 'right') {
                        wrapper.style.right = peek + 'px';
                        wrapper.style.top = pos + '%';
                    }
                    
                    slide.appendChild(wrapper);
                }

                const armL = wrapper.querySelector('.arm-l');
                const armR = wrapper.querySelector('.arm-r');
                if(armL) armL.style.transform = `rotate(${Math.floor(Math.random() * 180)}deg)`;
                if(armR) armR.style.transform = `rotate(${Math.floor(Math.random() * 180 - 180)}deg)`;

                const eyes = ['eye-normal', 'eye-wink', 'eye-happy'];
                const mouths = ['mouth-smile', 'mouth-o'];
                
                const eyeL = wrapper.querySelector('.eye-l');
                const eyeR = wrapper.querySelector('.eye-r');
                const mouth = wrapper.querySelector('.mouth');

                if (eyeL) eyeL.className = `eye ${eyes[Math.floor(Math.random()*eyes.length)]}`;
                if (eyeR) eyeR.className = `eye ${eyes[Math.floor(Math.random()*eyes.length)]}`;
                if (mouth) mouth.className = `mouth ${mouths[Math.floor(Math.random()*mouths.length)]}`;
            });

            const revealElements = document.querySelectorAll('.reveal');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if(entry.isIntersecting) {
                        entry.target.classList.add('active');
                    }
                });
            }, { threshold: 0.1 });

            revealElements.forEach(el => observer.observe(el));
        });
    </script>
</body>
</html>